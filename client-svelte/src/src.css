@import url("https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  blockquote {
    @apply px-4 py-1 bg-gray-200 rounded;
  }
  html {
    line-height: 1.6;
    font-size: 18px;
    @apply bg-white;
  }
  rt {
    font-size: 70%;
  }
  hr {
    @apply mt-16 w-[95%] mx-auto;
    @apply border-gray-400;
  }
  body {
    @apply relative;
  }
  .base {
    width: 95%;
    @apply max-w-2xl m-auto mt-12 mb-24;
  }
  ol {
    @apply pl-4;
  }
}

@layer components {
  /* Yes, normally you put this in the HTML when using Tailwind. */
  /* We have 163088 pages from Moedict (zh_TW) alone. */
  .h {
    h1 {
      @apply my-2;
    }
    a {
      @apply link;
    }
  }

  #sbc {
    /* Search Bar Container */
    @apply mt-2 mb-2;
    /* This gets search results to use this element to calculate its
     * relative units. */
    position: relative;

    #sr {
      /* Search Results */
      @apply absolute;
      @apply w-full rounded shadow-lg bg-white z-10;
      @apply mt-2;
      a {
        @apply w-full block px-2 py-1 my-1 bg-white;
      }
      p {
        @apply px-2 py-1;
      }
    }
    #sf {
      /* Search Form */
      @apply flex space-x-2;
      input {
        @apply px-2 py-1 rounded shadow bg-white;
      }
      /* input[type="search"] { */
      #sb {
        @apply w-full;
      }
    }
  }
  .dict {
    @apply border-b-2 border-black mb-2 my-8;
    @apply flex justify-between;
    .c {
      @apply flex-grow text-left relative;
      &.active::after {
        @apply rotate-45;
      }
      &::after {
        @apply -rotate-45 -translate-y-full;
        @apply transition-all;
        @apply absolute;
        bottom: 1px;
        left: 0;
        display: block;
        height: 0.5rem;
        width: 0.5rem;
        content: "";
        transform-origin: 75% 75%;
        box-shadow: 2px 2px;
        pointer-events: none;
      }
    }
    a {
      @apply link;
    }
  }
  .toc,
  .def {
    a {
      @apply link;
    }
  }
  .index {
    ul,
    input {
      @apply ml-1;
    }
  }
  .prose {
    p {
      @apply my-2;
    }
    h1,
    h2,
    h3 {
      @apply font-bold;
    }
    /* This is the sort of style generated by @tailwindcss/typography.
       This selector will not override utilities. */
    :where(h1):not(:where([class~="not-prose"] *)) {
      @apply text-2xl mt-4;
    }
    :where(a):not(:where([class~="not-prose"] *)) {
      @apply link;
    }
    h2,
    h3 {
      /* @apply text-xl; */
    }
    h2 {
      @apply mt-6;
    }
    ol {
      @apply list-decimal;
    }
  }
  .wordlink {
    @apply py-1 px-2 rounded-lg bg-gray-200 transition;
    &:hover {
      @apply no-underline bg-gray-300;
    }
  }
  .word {
    transition-property: max-height;
    transition-duration: 250ms;
    transition-timing-function: ease-in-out;
    overflow: hidden;
    h1,
    h2,
    h3 {
      @apply font-bold;
    }
    a {
      @apply link;
    }
    h1 {
      @apply text-2xl mt-4;
    }
    h2 {
      @apply text-xl mt-4;
    }
    h3 {
      @apply mb-0 mt-2;
    }
    ol {
      @apply list-decimal;
    }
    li {
      @apply mt-2;
    }
    li:first-child {
      @apply mt-0;
    }
    .pos {
      @apply font-bold mt-2 block;
    }
    /* This makes up for the mt-2 in .pos if .pos is not present. */
    :not(.pos) + ol,
    :not(.pos) + .def {
      @apply mt-2;
    }
    p {
      @apply prose;
    }
    .def {
      @apply block mb-2;
    }
  }
}

@layer utilities {
  .link {
    @apply text-indigo-500;
    @apply no-underline;
    &:hover {
      @apply underline;
    }
  }
}
